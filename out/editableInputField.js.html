<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: editableInputField.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: editableInputField.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>(function (common, $, undefined) {

    /**
     * @namespace: editableInputField
     */

    common.editableInputFieldCounter = 0;

    /**
     * constructor for EditableInputField objects
     *
     * @param {HTMLElement}container - container dom element
     * @param {Object} deltaContent - delta object to set as content
     * @param {String} htmlContent - html content for rendering
     * @param {String} type - input type. ["text"]
     * @param {Object} callback - callbacks to be executed when dialog buttons are used. currently, only 'onConfirm' is supported
     * @param {Object} args - readOnly: [false] disable input., active: [false] initialize with active editor, disableButtons: [false] disables dialog buttons
     * @returns {Window.common.EditableInputField}
     * @constructor
     */
    common.EditableInputField = function(container, deltaContent, htmlContent, type, callback, args){
        if (container === undefined) throw new Error("cannot instantiate input field without container");
        callback === undefined ? this.callback = {onConfirm: function(){console.log("no callback given")}}: this.callback = callback;
        common.editableInputFieldCounter++;
        this.id = common.editableInputFieldCounter;
        args = applyArgs(args);

        container.classList.add("editableInputField", "input-hidden");
        if(!args.readOnly) {
            container.classList.add("allow-editing");
        }
        this.args = args;
        this.container = container;
        this.deltaContent = deltaContent;
        this.htmlContent = htmlContent;
        this.domElements = {};
        this.quill;

        //deactivate on default
        if (args.active === true){
            this.activate();
        }
        else {
            this.deactivate();
        }


        var self = this;

        return this;
    };

    var applyArgs = function(args){
        args = (args === undefined) ? {}: args;
        return args;
    };

    var buildHTML = function(self){
        let id = self.id;
        let buttonContainer = document.createElement("div");
        buttonContainer.className = "editableInputField-dialog-container";
        buttonContainer.id= "editableInputField-dialog-container"+id;
        if (self.args.disableButtons === true) buttonContainer.style.display = "none";

        //add confirm button
        let confirmButton = document.createElement("div");
        confirmButton.className = "editableInputField-dialog-button editableInputField-dialog-confirmButton";
        confirmButton.innerHTML = "&lt;svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-check\">&lt;polyline points=\"20 6 9 17 4 12\">&lt;/polyline>&lt;/svg>"

        //add cancel button
        let cancelButton = document.createElement("div");
        cancelButton.className = "editableInputField-dialog-button editableInputField-dialog-cancelButton";
        cancelButton.innerHTML = "&lt;svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x\">&lt;line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\">&lt;/line>&lt;line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\">&lt;/line>&lt;/svg>"

        buttonContainer.append(confirmButton);
        buttonContainer.append(cancelButton);

        self.dialogDOM = {
            container: buttonContainer,
            confirmButton: confirmButton,
            cancelButton: cancelButton,
        }

        return buttonContainer;
    };

    var setupEventHandlers = function(self, editableInputFieldHTML){
        self.dialogDOM.confirmButton.addEventListener("click", function(e){
            e.preventDefault();
            e.stopPropagation();
            self.callback.onConfirm(self);
            self.deactivate();
        })
        self.dialogDOM.cancelButton.addEventListener("click", function(e){
            e.preventDefault();
            e.stopPropagation();
            self.deactivate();
        })
    };
    
    common.EditableInputField.prototype.isActive = function(){
        return this.isactive;
    };

    common.EditableInputField.prototype.activate = function(){
        var self = this;
        if(self.args.readOnly) return false;
        self.isactive = true;
        let container = this.container;
        container.classList.remove("input-hidden");
        container.classList.add("input-active");
        let quillcontainer = document.createElement("div");
        quillcontainer.className = "text-editor"
        container.innerHTML = "";
        container.append(quillcontainer);

        var toolbarOptions = [
            ['bold', 'italic', 'underline'/*, 'strike'*/],        // toggled buttons
            // ['blockquote', 'code-block'],
            // ['link', 'image'],

            // [{ 'header': 1 }, { 'header': 2 }],               // custom button values
            // [{ 'list': 'ordered'}, { 'list': 'bullet' }],
            // [{ 'script': 'sub'}, { 'script': 'super' }],      // superscript/subscript
            // [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent
            // [{ 'direction': 'rtl' }],                         // text direction

            // [{ 'size': ['small', false, 'large', 'huge'] }],  // custom dropdown
            // [{ 'header': [1, 2, 3, 4, 5, 6, false] }],

            [{ 'color': [] }, { 'background': [] }],          // dropdown with defaults from theme
            // [{ 'font': [] }],
            // [{ 'align': [] }],

            ['clean']                                         // remove formatting button
        ];

        const quill = new Quill(quillcontainer, {
            // theme: 'snow',
            theme: 'bubble',
            modules: {
                toolbar: toolbarOptions,
                clipboard: {
                    newLines: false
                },
                keyboard: {
                    bindings: {
                        enter: {
                            key: 13,
                            handler: function () {
                                return false;
                            }
                        }
                    }
                },
            },
            bounds: quillcontainer,

        });
        quill.setContents(this.deltaContent);

        //build dialog buttons
        var buttons = buildHTML(this);
        setupEventHandlers(this, buttons);

        //append to container
        container.append(buttons);
        self.quill = quill;
    }
    common.EditableInputField.prototype.deactivate = function(){
        let self = this;
        this.isactive = false;
        this.quill = undefined;
        //create div
        let textContainer = document.createElement("div");
        textContainer.className = "quill-render-text ";
        textContainer.insertAdjacentHTML("beforeend", this.htmlContent)
        this.container.innerHTML = "";
        this.container.classList.add("input-hidden");
        this.container.classList.remove("input-active");
        this.container.append(textContainer);

        this.container.addEventListener("click", function(e){
            e.preventDefault();
            if(!self.isactive){
                self.activate();
            }
        });

    }

    common.EditableInputField.prototype.getQuill = function() {
        return this.quill;
    }

    common.EditableInputField.prototype.reset = function(container, deltaContent, htmlContent, type, callback, args) {
        let resetObj = this.constructor(container, deltaContent, htmlContent, type, callback, args);
        return resetObj;
    };


    return common.EditableInputField;

}(window.common = window.common||{}, jQuery, undefined));</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="common.html">common</a></li></ul><h3>Classes</h3><ul><li><a href="common.DropdownMenu.html">DropdownMenu</a></li><li><a href="common.EditableInputField.html">EditableInputField</a></li><li><a href="common.EditableTextField.html">EditableTextField</a></li><li><a href="common.Sidebar.html">Sidebar</a></li><li><a href="dialogContent.DialogContent.html">DialogContent</a></li><li><a href="docker.Docker.html">Docker</a></li><li><a href="profile.Profile.html">Profile</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Fri Nov 13 2020 15:56:35 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
